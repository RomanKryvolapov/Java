package com.company;
import org.json.JSONException;
import org.json.JSONObject;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class Main {

    public static void main(String[] args) throws IOException {
        connection();
    }

    public static void connection() throws IOException, JSONException {
        String requestUrl = "https://api.themoviedb.org/3/movie/1396?api_key=358d127cfc98138fe9a600b0b63bd94f&language=ru-US";
        URL url = new URL(requestUrl);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.connect();
        InputStream in;
        int status = connection.getResponseCode();
        if (status != HttpURLConnection.HTTP_OK) {
            in = connection.getErrorStream();
        } else {
            in = connection.getInputStream();
        }

        String response = convertStreamToString(in);
        JSONObject obj = new JSONObject(response);
        System.out.println("Название - " + obj.getString("original_title"));
        System.out.println("Дата выхода - " + obj.getString("release_date"));
        System.out.println("Кинокомпания - " + obj.getJSONArray("production_companies").getJSONObject(0).getString("name"));

    }

    public static String convertStreamToString(InputStream stream) throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(stream));
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line).append("\n");
        }
        stream.close();
        return sb.toString();
    }

}



